"use strict";var apiKey="10cf9ce4a63505fa38196e2544e87774",imgApi="https://image.tmdb.org/t/p/w1280",searchUrl="https://api.themoviedb.org/3/search/movie?api_key=".concat(apiKey,"&query="),form=document.getElementById("search-form"),query=document.getElementById("search-input"),result=document.getElementById("result"),page=1,isSearching=!1;function fetchData(t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(fetch(t));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Network response was not ok.");case 6:return e.next=8,regeneratorRuntime.awrap(n.json());case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}},null,null,[[0,11]])}function fetchAndShowResult(t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetchData(t));case 2:(n=e.sent)&&n.results&&showResults(n.results);case 4:case"end":return e.stop()}})}function createMovieCard(e){var t=e.poster_path,n=e.original_title,r=e.release_date,a=e.overview,c=t?imgApi+t:"./img-01.jpeg",s=15<n.length?n.slice(0,15)+"...":n,o=r||"No release date";return'\n        <div class="column">\n            <div class="card">\n                <a class="card-media" href="./img-01.jpeg">\n                    <img src="'.concat(c,'" alt="').concat(n,'" width="100%" />\n                </a>\n                <div class="card-content">\n                    <div class="card-header">\n                        <div class="left-content">\n                        <h3 style="font-weight: 600">').concat(s,'</h3>\n                        <span style="color: #12efec">').concat(o,'</span>\n                        </div>\n                    <div class="right-content">\n                        <a href="').concat(c,'" target="_blank" class="card-btn">See Cover</a>\n                    </div>\n                </div>\n                <div class="info">\n                    ').concat(a||"No overview yet...","\n                </div>\n            </div>\n        </div>\n    </div>\n    ")}function clearResults(){result.innerHTML=""}function showResults(e){var t=e.map(createMovieCard).join("");result.innerHTML+=t||"<p>No results found.</p>"}function loadMoreResults(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(isSearching)return e.abrupt("return");e.next=2;break;case 2:return page++,t=query.value,n=t?"".concat(searchUrl).concat(t,"&page=").concat(page):"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=".concat(apiKey,"&page=").concat(page),e.next=7,regeneratorRuntime.awrap(fetchAndShowResult(n));case 7:case"end":return e.stop()}})}function detectEnd(){var e=document.documentElement,t=e.scrollTop,n=e.clientHeight;e.scrollHeight-20<=t+n&&loadMoreResults()}function handleSearch(t){var n,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=query.value.trim())return isSearching=!0,clearResults(),r="".concat(searchUrl).concat(n,"&page=").concat(page),e.next=8,regeneratorRuntime.awrap(fetchAndShowResult(r));e.next=9;break;case 8:query.value="";case 9:case"end":return e.stop()}})}function init(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return clearResults(),t="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=".concat(apiKey,"&page=").concat(page),isSearching=!1,e.next=5,regeneratorRuntime.awrap(fetchAndShowResult(t));case 5:case"end":return e.stop()}})}form.addEventListener("submit",handleSearch),window.addEventListener("scroll",detectEnd),window.addEventListener("resize",detectEnd),init();
//# sourceMappingURL=index.min.js.map
